---
layout: review_post
title: "[Paper Review] DyRRen: A Dynamic Retriever-Reranker-Generator Model for
Numerical Reasoning over Tabular and Textual Data"
author: Sohyun
date: 2024-08-04
---


이 논문은 수치적 추론(Numerical Reasoning)을 다루는 작업에 대한 연구이다. LLM의 경우 수치 추론을 진행할 때, 잘못된 답을 내놓는 경우가 종종 있다. 이는 숫자를 일종의 텍스트로 취급함으로써 발생하는 문제인데, 이를 해결하기 위해 쓰이는 방법이 크게 두 가지가 있다. 하나는 외부의 수학과 관련된 라이브러리를 활용하는 것이다. 또다른 하나는 수치와 관련된 데이터가 저장되어 있는 외부 데이터베이스를 활용해서 프롬프트를 증강하는(RAG) 방법이다.

해당 논문에서는 후자인 RAG를 통한 방법인 FinQANet이라는 방법의 한계점을 극복하기 위한 방법인 DyRRen 이라는 프레임워크를 제시한다. 이제 이에 대해 자세히 알아보자.

읽다보니 알게 된 것인데 FinQANet이나 DyRRen 모델은 사용자에게 자연어 형태로 무언가 대답을 만드는 것보다는 수학적 표현식을 생성하는 것(+이를 계산하는 것)이 중점을 둔 것으로 보인다. 어쨋든, 읽어보면서 조금 더 살펴보도록 하자.


## Introduce

기존의 데이터셋, 예를 들어 **DROP(Dua et al. 2019)**[^1]은 주로 간단한 계산이나 비교에 중점을 두었다. 이러한 데이터셋은 주어진 정보를 통해 쉽게 계산할 수 있는 문제를 다루며, 복잡한 논리적 추론을 요구하지 않는 경향이 있었다. 하지만, 금융 보고서와 같은 복잡한 실세계 시나리오에서는 보다 정교한 수치적 추론 능력이 필요하다. 이를 위해 개발된 데이터셋인 FinQA와 TAT-QA는 보다 복잡하고 다양한 정보를 포함한 문제를 해결할 수 있도록 설계되었습니다. 이러한 데이터셋은 기계 학습 모델이 복잡한 수치적 표현을 생성하고 이를 바탕으로 올바른 답을 도출할 수 있도록 돕는다.

예를 들어, FinQA의 한 사례에서는, 연도별 판매 기록을 보여주는 표와 관련 금융 정보를 담고 있는 몇 가지 문장이 제공된다. 여기서 질문에 답하기 위해서는 덧셈, 뺄셈 등의 수학 연산을 결정하고, 그 인자를 표나 문장에서 선택하여 올바른 수학 표현식을 생성한 후 답을 계산해야 한다. 경우에 따라, 수학적 표현식의 한 인자(예: 아래 그림의 #0)는 이전 계산 결과일 수 있다.

![1](https://github.com/user-attachments/assets/5cc21b25-0da1-4dd4-8adb-84e33f1e1af9){: .responsive-img .align-center}


기존의 수치 표현 생성 방법은 Retriever 와 Generator 라는 두 가지 모듈로 나누어졌었다. Retriever 의 경우 가장 관련성이 높은 정보를 찾아서 Generator 에 제공하는 역할을 담당하고, Generator 은 Retriever 가 제공한 정보를 바탕으로 수학적 표현을 만들어낸다. **FinQANet (Chen et al. 2021b)**[^2]는 이 분야에서 잘 알려진 방법 중 하나이고, FinQANet은 다음과 같은 방식으로 작동한다.

Retriever Phase: 표를 문장으로 변환하고, BERT 기반의 이진 분류기를 사용하여 관련 문장을 선택한다.
Generator Phase: Encoder-Decoder 모델을 사용하여 수학적 표현을 생성한다. 여기서 인코더는 BERT나 RoBERT를 사용할 수 있으며, LSTM의 히든 레이어 출력이 표현식 토큰을 예측하는 데 사용된다.

하지만 FinQANet에는 몇 가지 한계가 있다.

1. **긴 문장 연결의 문제**: FinQANet의 생성기는 선택된 문장(검색된 문서에서 가져온 것)을 길게 연결하여 인코더에 입력한다. 이는 특정 숫자를 정확히 찾기 어려운 상황을 만든다. 예를 들어, “7%“라는 숫자를 생성해야 할 때, “7%“가 포함된 특정 문장에만 어텐션해야 하지만, FinQANet은 이를 잘 처리하지 못한다. 

2. **Retriever의 단순성**: FinQANet의 리트리버는 단순한 이진 분류기이기 때문에 질문과 문맥 간의 깊이 있는 상호작용을 충분히 활용하지 못한다. 예를 들어, 질문에서 특정 연도(“2015”, “2016”)나 항목(“제3자 판매”)에 집중해야 하지만, 이는 어려운 일이다.


[^1]: [DROP: A Reading Comprehension Benchmark Requiring Discrete Reasoning Over Paragraphs](https://aclanthology.org/N19-1246.pdf)

[^2]:A Numerical Reasoning Question Answering System with Fine-grained Retriever and the Ensemble of Multiple Generators for FINQA
<!--stackedit_data:
eyJoaXN0b3J5IjpbMjEzMDM5Njc3NiwtMTk5MzY0MjM4OCwtMT
g0MDA2MzMyMCwtMTY5MjAzMzI3MywtMTg4MTAyOTQwMSwxODI0
NjQsLTE5MDAxMjUwMjUsLTEzOTE2MjI0MDYsMTk3NTk0ODI2NC
w4ODUyMDAzODYsLTQ4NzI2NzM3LDY5MTU5MTMyNCwyNTMxMjY4
NTksLTM4NDUxNjgwNywtMTQ4MzM2MzQzOCwtMTUzOTQ3OTc1Mi
wtNzcwNDQ0MjcwLDE2MTc1OTY5MzRdfQ==
-->